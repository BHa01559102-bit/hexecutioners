<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Hexecutioners</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .navbar {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        
        .navbar h1 {
            color: #333;
            font-size: 24px;
        }
        
        .navbar-right {
            display: flex;
            gap: 20px;
            align-items: center;
        }
        
        .user-info {
            color: #555;
            font-weight: 500;
        }
        
        .logout-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            text-decoration: none;
            font-weight: 600;
            transition: transform 0.2s;
        }
        
        .logout-btn:hover {
            transform: translateY(-2px);
        }
        
        .profile-dropdown {
            position: relative;
            display: inline-block;
        }
        
        .profile-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: transform 0.2s;
        }
        
        .profile-btn:hover {
            transform: translateY(-2px);
        }
        
        .dropdown-content {
            display: none;
            position: absolute;
            background-color: white;
            min-width: 200px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            padding: 12px 0;
            z-index: 1;
            border-radius: 5px;
            top: 100%;
            right: 0;
            margin-top: 5px;
        }
        
        .dropdown-content a {
            color: #333;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
            transition: background-color 0.2s;
        }
        
        .dropdown-content a:hover {
            background-color: #f0f0f0;
        }
        
        .dropdown-content.show {
            display: block;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        .card {
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            margin-bottom: 20px;
        }
        
        .card h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 28px;
        }
        
        .welcome-message {
            color: #666;
            font-size: 16px;
            line-height: 1.6;
            margin-bottom: 30px;
        }
        
        .action-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .btn {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 30px;
            border-radius: 5px;
            text-decoration: none;
            font-weight: 600;
            transition: transform 0.2s;
            border: none;
            cursor: pointer;
            font-size: 16px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background: #6c757d;
        }
        
        .scores-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .score-box {
            background: #f8f9ff;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        
        .score-box h3 {
            color: #667eea;
            font-size: 14px;
            margin-bottom: 10px;
        }
        
        .score-value {
            color: #333;
            font-size: 28px;
            font-weight: bold;
        }
        
        .no-scores {
            color: #999;
            font-size: 14px;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="navbar">
        <h1>Hexecutioners</h1>
        <div class="navbar-right">
            <select id="languageSelector" onchange="changeLanguage(this.value)" style="padding: 8px; border-radius: 5px; border: 1px solid #ddd; margin-right: 15px;">
                <option value="en" {% if lang == 'en' %}selected{% endif %}>English</option>
                <option value="hi" {% if lang == 'hi' %}selected{% endif %}>‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
                <option value="kn" {% if lang == 'kn' %}selected{% endif %}>‡≤ï‡≤®‡≥ç‡≤®‡≤°</option>
            </select>
            <span class="user-info" data-translate="welcome_user">Welcome, {{ username }}!</span>
            <div class="profile-dropdown">
                <button class="profile-btn" onclick="toggleDropdown()" data-translate="profile">üë§ Profile</button>
                <div class="dropdown-content" id="dropdownMenu">
                    <a href="{{ url_for('user_details') }}" data-translate="user_details">üë§ User Details</a>
                    <a href="{{ url_for('upload_documents_page') }}" data-translate="upload_documents">üìÑ Upload Documents</a>
                    <a href="{{ url_for('logout') }}" data-translate="logout">üö™ Logout</a>
                </div>
            </div>
        </div>
    </div>
    
    <div class="container">
        <div class="card">
            <h2 data-translate="dashboard_title">Dashboard</h2>
            <p class="welcome-message" data-translate="dashboard_welcome">
                Welcome to Hexecutioners! You have successfully logged in. While you wait for your class to start, 
                enjoy some quick games to keep yourself engaged and have fun.
            </p>
            
            <div class="action-buttons">
                <a href="{{ url_for('games') }}" class="btn" data-translate="play_games">üéÆ Play Games</a>
                <a href="{{ url_for('learning_modules') }}" class="btn" data-translate="learn_modules">üìö Learn Modules</a>
                <a href="{{ url_for('leaderboard') }}" class="btn" data-translate="leaderboard">üèÜ Leaderboard</a>
                <a href="{{ url_for('skill_performance') }}" class="btn btn-secondary" data-translate="skill_performance">üìä Skill Performance</a>
            </div>
        </div>
        
        <div class="card">
            <h2>Your Best Scores</h2>
            {% if game_scores %}
                <div class="scores-grid">
                    {% for game_name, score in game_scores.items() %}
                        <div class="score-box">
                            <h3>{{ game_name }}</h3>
                            <div class="score-value">{{ score }}</div>
                        </div>
                    {% endfor %}
                </div>
            {% else %}
                <p class="no-scores">No scores yet. Start playing games to earn points!</p>
            {% endif %}
        </div>
    </div>
    
    <script>
        function toggleDropdown() {
            document.getElementById('dropdownMenu').classList.toggle('show');
        }
        
        // Close dropdown when clicking outside
        window.onclick = function(event) {
            if (!event.target.matches('.profile-btn')) {
                const dropdowns = document.getElementsByClassName('dropdown-content');
                for (let i = 0; i < dropdowns.length; i++) {
                    if (dropdowns[i].classList.contains('show')) {
                        dropdowns[i].classList.remove('show');
                    }
                }
            }
        }
        
        // Language translations
        const translations = {
            'en': {
                'welcome_user': 'Welcome, {{ username }}!',
                'profile': 'üë§ Profile',
                'user_details': 'üë§ User Details',
                'upload_documents': 'üìÑ Upload Documents',
                'logout': 'üö™ Logout',
                'dashboard_title': 'Dashboard',
                'dashboard_welcome': 'Welcome to Hexecutioners! You have successfully logged in. While you wait for your class to start, enjoy some quick games to keep yourself engaged and have fun.',
                'play_games': 'üéÆ Play Games',
                'learn_modules': 'üìö Learn Modules',
                'leaderboard': 'üèÜ Leaderboard',
                'skill_performance': 'üìä Skill Performance'
            },
            'hi': {
                'welcome_user': '‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à, {{ username }}!',
                'profile': 'üë§ ‡§™‡•ç‡§∞‡•ã‡§´‡§º‡§æ‡§á‡§≤',
                'user_details': 'üë§ ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ ‡§µ‡§ø‡§µ‡§∞‡§£',
                'upload_documents': 'üìÑ ‡§¶‡§∏‡•ç‡§§‡§æ‡§µ‡•á‡§ú‡§º ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç',
                'logout': 'üö™ ‡§≤‡•â‡§ó‡§Ü‡§â‡§ü',
                'dashboard_title': '‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§°',
                'dashboard_welcome': 'Hexecutioners ‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à! ‡§Ü‡§™‡§®‡•á ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§≤‡•â‡§ó ‡§á‡§® ‡§ï‡§ø‡§Ø‡§æ ‡§π‡•à‡•§ ‡§Ö‡§™‡§®‡•Ä ‡§ï‡§ï‡•ç‡§∑‡§æ ‡§∂‡•Å‡§∞‡•Ç ‡§π‡•ã‡§®‡•á ‡§§‡§ï ‡§á‡§Ç‡§§‡§ú‡§æ‡§∞ ‡§ï‡§∞‡§§‡•á ‡§∏‡§Æ‡§Ø, ‡§ñ‡•Å‡§¶ ‡§ï‡•ã ‡§µ‡•ç‡§Ø‡§∏‡•ç‡§§ ‡§î‡§∞ ‡§Æ‡§ú‡§º‡•á‡§¶‡§æ‡§∞ ‡§∞‡§ñ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡•Å‡§õ ‡§§‡•ç‡§µ‡§∞‡§ø‡§§ ‡§ó‡•á‡§Æ ‡§ñ‡•á‡§≤‡•á‡§Ç‡•§',
                'play_games': 'üéÆ ‡§ó‡•á‡§Æ ‡§ñ‡•á‡§≤‡•á‡§Ç',
                'learn_modules': 'üìö ‡§∏‡•Ä‡§ñ‡§®‡•á ‡§ï‡•á ‡§Æ‡•â‡§°‡•ç‡§Ø‡•Ç‡§≤',
                'leaderboard': 'üèÜ ‡§≤‡•Ä‡§°‡§∞‡§¨‡•ã‡§∞‡•ç‡§°',
                'skill_performance': 'üìä ‡§ï‡•å‡§∂‡§≤ ‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§®'
            },
            'kn': {
                'welcome_user': '‡≤∏‡≥ç‡≤µ‡≤æ‡≤ó‡≤§, {{ username }}!',
                'profile': 'üë§ ‡≤™‡≥ç‡≤∞‡≥ä‡≤´‡≥à‡≤≤‡≥ç',
                'user_details': 'üë§ ‡≤¨‡≤≥‡≤ï‡≥Ü‡≤¶‡≤æ‡≤∞ ‡≤µ‡≤ø‡≤µ‡≤∞‡≤ó‡≤≥‡≥Å',
                'upload_documents': 'üìÑ ‡≤¶‡≤æ‡≤ñ‡≤≤‡≥Ü‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤Ö‡≤™‡≥ç‚Äå‡≤≤‡≥ã‡≤°‡≥ç ‡≤Æ‡≤æ‡≤°‡≤ø',
                'logout': 'üö™ ‡≤≤‡≤æ‡≤ó‡≥ç‚Äå‡≤î‡≤ü‡≥ç',
                'dashboard_title': '‡≤°‡≥ç‡≤Ø‡≤æ‡≤∂‡≥ç‚Äå‡≤¨‡≥ã‡≤∞‡≥ç‡≤°‡≥ç',
                'dashboard_welcome': 'Hexecutioners ‡≤ó‡≥Ü ‡≤∏‡≥ç‡≤µ‡≤æ‡≤ó‡≤§! ‡≤®‡≥Ä‡≤µ‡≥Å ‡≤Ø‡≤∂‡≤∏‡≥ç‡≤µ‡≤ø‡≤Ø‡≤æ‡≤ó‡≤ø ‡≤≤‡≤æ‡≤ó‡≥ç ‡≤á‡≤®‡≥ç ‡≤Æ‡≤æ‡≤°‡≤ø‡≤¶‡≥ç‡≤¶‡≥Ä‡≤∞‡≤ø. ‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤§‡≤∞‡≤ó‡≤§‡≤ø ‡≤™‡≥ç‡≤∞‡≤æ‡≤∞‡≤Ç‡≤≠‡≤µ‡≤æ‡≤ó‡≥Å‡≤µ‡≤µ‡≤∞‡≥Ü‡≤ó‡≥Ü ‡≤ï‡≤æ‡≤Ø‡≥Å‡≤§‡≥ç‡≤§‡≤ø‡≤∞‡≥Å‡≤µ‡≤æ‡≤ó, ‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ‡≤®‡≥ç‡≤®‡≥Å ‡≤§‡≥ä‡≤°‡≤ó‡≤ø‡≤∏‡≤ø‡≤ï‡≥ä‡≤≥‡≥ç‡≤≥‡≤≤‡≥Å ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤Æ‡≥ã‡≤ú‡≥Å ‡≤Æ‡≤æ‡≤°‡≤≤‡≥Å ‡≤ï‡≥Ü‡≤≤‡≤µ‡≥Å ‡≤§‡≥ç‡≤µ‡≤∞‡≤ø‡≤§ ‡≤Ü‡≤ü‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤Ü‡≤°‡≤ø.',
                'play_games': 'üéÆ ‡≤Ü‡≤ü‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤Ü‡≤°‡≤ø',
                'learn_modules': 'üìö ‡≤ï‡≤≤‡≤ø‡≤ï‡≥Ü ‡≤Æ‡≤æ‡≤°‡≥ç‡≤Ø‡≥Ç‡≤≤‡≥ç‚Äå‡≤ó‡≤≥‡≥Å',
                'leaderboard': 'üèÜ ‡≤≤‡≥Ä‡≤°‡≤∞‡≥ç‚Äå‡≤¨‡≥ã‡≤∞‡≥ç‡≤°‡≥ç',
                'skill_performance': 'üìä ‡≤ï‡≥å‡≤∂‡≤≤‡≥ç‡≤Ø ‡≤ï‡≤æ‡≤∞‡≥ç‡≤Ø‡≤ï‡≥ç‡≤∑‡≤Æ‡≤§‡≥Ü'
            }
        };
        
        function changeLanguage(lang) {
            localStorage.setItem('selectedLanguage', lang);
            document.querySelectorAll('[data-translate]').forEach(element => {
                const key = element.getAttribute('data-translate');
                if (translations[lang] && translations[lang][key]) {
                    element.textContent = translations[lang][key];
                }
            });
            
            // Update language in session via AJAX
            fetch('/change-language', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ language: lang })
            });
        }
        
        // Initialize language on page load
        document.addEventListener('DOMContentLoaded', function() {
            const savedLang = localStorage.getItem('selectedLanguage') || '{{ lang }}';
            document.getElementById('languageSelector').value = savedLang;
            changeLanguage(savedLang);
        });
    </script>
</body>
</html>
